<main>
  <%= button_to("Your Stories", author_stories_path(current_author), method: :get) if !is_admin? %>

  <article class="story-card">
    <h1><%= current_story.story_title %></h1>
    <p><%= current_story.story %></p>
    <%= button_to("Edit", edit_author_story_path(current_author, current_story), method: :get) if !is_admin? %>
  </article>

  <article class="new-word-card">
    <% # form_with model: [@word, @gloss], local: true, cache: false do |f| %>
    <%= form_for(@word, url: story_words_path(current_story, @word)) do |f| %>
      <%= f.text_field :lemma, :placeholder => "Swahili base word", :autofocus => true %>
      <%= f.text_field :lexical_category, :placeholder => "Noun, verb, pronoun, etc." %>
      <%= f.text_field :lemma_class, :placeholder => "Swahili noun class, transitive, or instansitive verb, etc." %>
      <%= f.text_field :notes, :placeholder => "Plural, irregularity, etc." %>
      <%= f.text_field :origin, :placeholder => "Bantu, Arabic, English, etc." %>
      <%= f.fields_for :glosses, @word.glosses.build do |g| %>
        <%= g.text_field :gloss, :placeholder => "Gloss for this word" %>
        <%= g.hidden_field :story_id, :value => current_story.id %>
      <% end %>
      <%= f.submit "Add Word" %>
    <% end %>

    <% if !current_story.word_glosses.empty?  %>
      <article class="glossary-card">
        <% current_story.word_glosses.each do |word_gloss| %>
          <% w = word_gloss[:word] %>
          <% glosses = word_gloss[:glosses] %>

          <section class="lemma-card">
            <span class="lemma-card--lemma"><%= w.lemma %></span>
            <span class="lemma-card--lexical-category"><%= w.lexical_category %></span>
            <span class="lemma-card--lemma_class"><%= w.lemma_class %></span>
            <span class="lemma-card--notes"><%= w.notes %></span>
            <span class="lemma-card--origin"><%= w.origin %></span>
            <span class="lemma-card--glosses"><%= glosses %></span>
          </section>
        <% end %>
      </article>
    <% end %>
  </article>

</main>
